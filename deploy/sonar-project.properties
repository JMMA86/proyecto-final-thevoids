# ===========================================
# Configuración básica del proyecto
# ===========================================
sonar.projectKey=onco-logic
sonar.projectName=OncoLogic
sonar.projectVersion=0.0.1-SNAPSHOT
sonar.projectDescription=Sistema de gestión oncológica desarrollado con Spring Boot

# Configuración del servidor SonarQube
# Para desarrollo local, usar: http://localhost:9000  
# Para servidor Azure, usar la IP pública que se obtendrá después del despliegue
sonar.host.url=${SONAR_HOST_URL}
sonar.login=${SONAR_TOKEN}

# ===========================================
# Estructura del proyecto Maven
# ===========================================
sonar.sources=src/main/java
sonar.tests=src/test/java
sonar.java.binaries=target/classes
sonar.java.test.binaries=target/test-classes

# Configuración de librerías y dependencias
sonar.java.libraries=target/dependency/*.jar,target/classes
sonar.java.source=17
sonar.java.target=17

# ===========================================
# Configuración de cobertura con JaCoCo
# ===========================================
sonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml
sonar.java.coveragePlugin=jacoco

# Configuración de encoding
sonar.sourceEncoding=UTF-8

# ===========================================
# Exclusiones de análisis
# ===========================================
# Archivos que no queremos analizar (calidad de código)
sonar.exclusions=\
    **/entity/**,\
    **/dto/**,\
    **/mapper/*Impl.java,\
    **/config/**,\
    **/OncoLogicApplication.java,\
    src/main/resources/static/**,\
    src/main/resources/templates/**,\
    target/**,\
    **/*Exception.java,\
    **/*Config.java

# Exclusiones de cobertura (archivos que no necesitan cobertura de tests)
sonar.coverage.exclusions=\
    **/entity/**,\
    **/dto/**,\
    **/config/**,\
    **/OncoLogicApplication.java,\
    **/*Exception.java,\
    **/*Config.java,\
    **/mapper/*Impl.java

# Exclusiones de duplicación (archivos donde la duplicación es aceptable)
sonar.cpd.exclusions=\
    **/entity/**,\
    **/dto/**,\
    **/config/**

# ===========================================
# Configuración de autenticación
# ===========================================
# NOTA: El token debe ser configurado como variable de entorno
# o pasado como parámetro al comando Maven para mayor seguridad
# 
# Opciones de configuración:
# 1. Variable de entorno: SONAR_TOKEN=tu_token_aqui
# 2. Parámetro Maven: -Dsonar.token=tu_token_aqui
# 3. Configurar en este archivo (menos seguro):
# sonar.token=your_token_here
# Para CI/CD usar: ${SONAR_TOKEN}
sonar.token=${SONAR_TOKEN}

# ===========================================
# Configuración de tests
# ===========================================
# Patrones de archivos de test
sonar.test.inclusions=\
    src/test/**/*Test.java,\
    src/test/**/*Tests.java

# Exclusiones de tests problemáticos (temporalmente)
sonar.test.exclusions=\
    **/OncoLogicApplicationTests.java,\
    **/TaskMapperUnitTest.java,\
    **/RestTaskControllerUnitTest.java

# ===========================================
# Configuración adicional
# ===========================================

# Tamaño máximo de archivos a analizar (en MB)
sonar.projectBaseDir=.

# Configuración de análisis incremental
sonar.scm.provider=git

# Configuración de reglas de calidad
sonar.qualitygate.wait=false